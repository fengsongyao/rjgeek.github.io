---
title: 【计算机网络】网络层-IPv4是什么？IPv4怎么划分的？
id: 813  
categories:
  - 计算机网络
date: 2016-12-13 16:15:54
tags:
---

## 引言
你需要上网，你在浏览器中输入一个网址，实际是你和服务器之间的沟通，两者之前需要沟通，就要知道两个的位置，IP就是用来标记你的位置的，告诉外部网络，你是谁？我以什么样的方式与外部通信，IP的地址是怎么样划分的，IP不够用的时候怎么处理，带着这些问题，开始本文的阅读。  
你可以通过百度直接输入IP查询你是谁？

<img src="https://rjgeek.github.io/images/2016/12/ip_1.png?t=1>" width = "85%" height = "65%" alt="图片名称" align=center />  
<!--more-->
你也通过 https://wq.apnic.net/whois-search 通过查询对方是谁？

<img src="https://rjgeek.github.io/images/2016/12/ip_2.png?t=1>" width = "85%" height = "65%" alt="图片名称" align=center />  

## IP是什么？
互联网协议地址（英语：Internet Protocol Address，又译为网际协议地址），缩写为IP地址（英语：IP Address），是分配给网络上使用网际协议（英语：Internet Protocol, IP）的设备的数字标签。常见的IP地址分为IPv4与IPv6两大类。

由32位二进制数组成，为便于使用，常以XXX.XXX.XXX.XXX形式表现，每组XXX代表小于或等于255的10进制数。例如维基媒体的一个IP地址是208.80.152.2。地址可分为A,B,C,D,E五大类，其中E类属于特殊保留地址。

## IP地址分类
拿那上面的百度IP，103.235.46.39作为例子，因为人类依赖十进制，所以这里的IP地址用十进制的方式表示，要让机器识别，还是得转为二进制    
(十进制IP地址) 103.235.46.39  
(二进制IP地址) 1110011.11101011.101110.100111  
一共有8乘4=32位，这种IP方式的表示方法，叫做IPV4，这样的话，一共有多少个IP地址呢？  
**最小地址 00000000 00000000 00000000 00000000 也就是 0.0.0.0**   
**最大地址 11111111 11111111 11111111 11111111 也就是 255.255.255.255**  
IPV4的方式，最多可以表示 255 乘 255 乘255 乘 255 = 4228250625 个ip地址 = 40亿,40亿的IPV4地址，预计将会在2020年年前后分配完毕 （具体数字记不清）,目前世界有70亿人口，本来这些IP就不够分的，偏偏还有人搞三六九等，搞出A类，B类，C类地址
其中分类的标准是这样的

<img src="https://rjgeek.github.io/images/2016/12/ip_3.png?t=1>" width = "85%" height = "65%" alt="图片名称" align=center />  

### A类IP地址
A类地址前8位表示网络地址，后24位表示表示主机地址，那么可以容纳的主机数是2的24次方，就是16,777,214，翻译成中文，就是一千六百七十万个，差不多就是深圳+香港的人口总数。  

A类地址范围：1.0.0.1到126.255.255.254，为什么明明是8位，为什么只能只到126，其中最前面1位为固定位0，为什么要这样设计？二进制数里全是“0”和全是“1”的要保留。“0”做为网络号，“1”做为广播号。所以A类地址的网段为1—126.，这样能表示的范围是就是7位了，但是 127.0.0.0到127.255.255.255是保留地址，用做循环测试用的。A类地址中的私有地址和保留地址： 10.0.0.0到10.255.255.255是私有地址（所谓的私有地址就是在互联网上不使用，而被用在局域网络中的地址）。  

顺便解释下私有私有地址
上面提到IP地址在全世界范围内唯一，看到这句话你可能有这样的疑问，像192.168.0.1这样的地址在许多地方都能看到，并不唯一，这是为 何？Internet管理委员会规定如下地址段为私有地址，私有地址可以自己组网时用，但不能在Internet网上用，Internet网没有这些地址 的路由，有这些地址的计算机要上网必须转换成为合法的IP地址,也称为公网地址，这就像有很到的世界公园，每个公园内都可命名相同的大街，如香榭丽舍大街，但对外我们只能看到公园的地址和真正的香榭丽舍大街。下面是A、B、C类网络中的私有地址段。你自己组网时就可以用这些地址了。  
      10.0.0.0～10.255.255.255  
      172.16.0.0～172.131.255.255  
      192.168.0.0～192.168.255.255  
     
那么谁在使用A类地址，100%都在美国的大公司，在本来地址不足的情况下，非要搞出一个Ａ类地址，一方面是当时没有预想到网络的发展会如此迅速，另一方面也体现了美国的特权主义，“爷就是网络的规定制定者，有意见您就别用”
3.0.0.0/8：通用  
9.0.0.0/8：IBM  
11.0.0.0/8：国防部  
12.0.0.0/8：AT&T贝尔实验室  
13.0.0.0/8：施乐  
15.0.0.0/8：HP  
16.0.0.0/8：DEC  
17.0.0.0/8：苹果  
18.0.0.0/8：MIT  
19.0.0.0/8：福特汽车  
55.0.0.0/8：波音  
56.0.0.0/8：邮政局  
至于上面的/8是什么意思，我以后的文章会解释

### B类IP地址
B类地址，前16位表示网络地址，后16位表示主机地址，需要指出的是B类网络地址的前两位也是固定的为1,0，其中预留的地址的上面已经写过，大部分的B类地址在欧洲，如伯明翰大学的就是B类地址，而且还有两个，而多数的中国大学都没有这么幸运，基本都是C类地址，还有可能是附庸的C类地址。

那么一共有多少个B类地址可以容纳多少个主机呢
16位是主机标识，所以主机数应该是2的16次幂 65536，扣除两个保留地址后，主机最大数应该是65534个。

### C类IP地址
C类地址其中24位网络地址，8位位主机地址，24位的网络的地址中前三位110也已经被固定，实际C类地址的操作位数为21位，因为是二进制数，所以网段数应该为：2的21次幂个网段，等于2097152，扣除两个全“0”，全“1”的保留地址，所以B类网络可以有2097150个网段。而转换成十进制后，IP地址的第一个小数点前的数字应该是多少呢？因为第一段是110XXXXX，所以应该是 2的5次幂，等于32个。所以网段应该是从192开始，到192+32-1=223. 即十进制IP的第一段数字是在192—223之间。

C类主机数计算：因为后面8位是主机标识，所以主机数应该是 2的8次幂 256，扣除两个保留地址后，主机最大数应该是254个

如果全世界全都按照C类地址去分，虽然总得网络容量不会变，但是机会会更均等，不会出现像以上那样无耻的A类地址垄断，那么这个分配的权利在谁手里？
世界上四个掌管IP地址分配的四个组织：
APNIC (Asia Pacific Network Information Centre) - 亚太地区
ARIN (American Registry for Internet Numbers) - 北美、南部非洲
LACNIC (Regional Latin-American and Caribbean IP Address Registry) – 拉美和加勒比海地区
RIPE NCC (Réseaux IP Européens) - 欧洲、中东、中亚、北部非洲

### D类IP地址
D类IP地址第一个字节以“1110”开始 。它并不指向特定的网络，目前这一类地址被用在多点广播（Multicast）中。多点广播地址用来一次寻址一组计算机，它标识共享同一协议的一组计算机。

### E类IP地址 
以“1111”开始，为将来使用保留。 
全零（“0．0．0．0”）地址对应于当前主机。全“1”的IP地址（“255．255．255．255”）是当前子网的广播地址。 

## 总结
<font color=#00ffff>上面讲了什么是IP  
从IP的分配的角度深深的痛斥了美国的特权主义与霸权主义！  
</font>
中国多数都是C类地址，一个C类IP地址，只能分配254个主机，该如何解决中国几十亿的设备上网问题，下一次博客我将继续深入~

## 声明
本文30%为组合,70%为原创

## 引用
https://www.zhihu.com/question/29723388/answer/66737890  
http://www.xitong8.com/xtjc/20120217/2576.html、  
http://blog.sina.com.cn/s/blog_6de000c20101jj8b.html  
https://zh.wikipedia.org/wiki/IP%E5%9C%B0%E5%9D%80





