---
title: 【编程语言】Java设计原则-迪米特法则
id: 1112
categories:
  - JAVA设计模式
  - 编程语言
date: 2016-02-12 16:33:15
tags:
---

<span style="font-family: 仿宋; font-size: 14pt;"><span style="color: black; background-color: white;">**定义：**一个对象应该对其他对象保持最少的了解。</span>
</span>

<span style="color: black; font-family: 仿宋; font-size: 14pt;">**问题由来：**类与类之间的关系越密切，耦合度越大，当一个类发生改变时，对另一个类的影响也越大。
</span>

<span style="color: black; font-family: 仿宋; font-size: 14pt;">**解决方案：**尽量降低类与类之间的耦合。
</span>

<span style="color: black; font-size: 14pt;"><span style="font-family: 宋体;">  </span><span style="font-family: 仿宋;">自从我们接触编程开始，就知道了软件编程的总的原则：低耦合，高内聚。无论是面向过程编程还是面向对象编程，只有使各个模块之间的耦合尽量的低，才能提高代码的复用率。低耦合的优点不言而喻，但是怎么样编程才能做到低耦合呢？那正是迪米特法则要去完成的。</span></span>

<span style="color: black; font-size: 14pt;"><span style="font-family: 宋体;"><!--more--></span><span style="font-family: 仿宋;">迪米特法则又叫最少知道原则，最早是在1987年由美国Northeastern University的Ian Holland提出。通俗的来讲，就是一个类对自己依赖的类知道的越少越好。也就是说，对于被依赖的类来说，无论逻辑多么复杂，都尽量地的将逻辑封装在类的内部，对外除了提供的public方法，不对外泄漏任何信息。迪米特法则还有一个更简单的定义：只与直接的朋友通信。首先来解释一下什么是直接的朋友：每个对象都会与其他对象有耦合关系，只要两个对象之间有耦合关系，我们就说这两个对象之间是朋友关系。耦合的方式很多，依赖、关联、组合、聚合等。其中，我们称出现成员变量、方法参数、方法返回值中的类为直接的朋友，而出现在局部变量中的类则不是直接的朋友。也就是说，陌生的类最好不要作为局部变量的形式出现在类的内部。
</span></span>

<span style="color: black; font-family: 仿宋; font-size: 14pt;">举一个例子：有一个集团公司，下属单位有分公司和直属部门，现在要求打印出所有下属单位的员工ID。先来看一下违反迪米特法则的设计。
</span>

1.  <div style="background: white;"><span style="color: #008200; font-size: 9pt;"><span style="font-family: Consolas;">//</span><span style="font-family: 宋体;">总公司员工</span><span style="color: black; font-family: Consolas;">  <span style="color: #5c5c5c;">
</span></span></span></div>
2.  <div style="background: #f8f8f8;"><span style="color: #006699; font-family: Consolas; font-size: 9pt;">**class**<span style="color: black;"> Employee{  <span style="color: #5c5c5c;">
</span></span></span></div>
3.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**private**<span style="color: black;"> String id;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
4.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> <span style="color: #006699;">**void**<span style="color: black;"> setId(String id){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></div>
5.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**this**<span style="color: black;">.id = id;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
6.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
7.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> String getId(){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
8.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**return**<span style="color: black;"> id;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
9.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
10.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">}  <span style="color: #5c5c5c;">
</span></span></div>
11.  <div style="background: white;">
</div>
12.  <div style="background: #f8f8f8;"><span style="color: #008200; font-size: 9pt;"><span style="font-family: Consolas;">//</span><span style="font-family: 宋体;">分公司员工</span><span style="color: black; font-family: Consolas;">  <span style="color: #5c5c5c;">
</span></span></span></div>
13.  <div style="background: white;"><span style="color: #006699; font-family: Consolas; font-size: 9pt;">**class**<span style="color: black;"> SubEmployee{  <span style="color: #5c5c5c;">
</span></span></span></div>
14.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**private**<span style="color: black;"> String id;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
15.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> <span style="color: #006699;">**void**<span style="color: black;"> setId(String id){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></div>
16.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**this**<span style="color: black;">.id = id;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
17.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
18.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> String getId(){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
19.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**return**<span style="color: black;"> id;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
20.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
21.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">}  <span style="color: #5c5c5c;">
</span></span></div>
22.  <div style="background: #f8f8f8;">
</div>
23.  <div style="background: white;"><span style="color: #006699; font-family: Consolas; font-size: 9pt;">**class**<span style="color: black;"> SubCompanyManager{  <span style="color: #5c5c5c;">
</span></span></span></div>
24.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> List&lt;SubEmployee&gt; getAllEmployee(){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
25.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;SubEmployee&gt; list = <span style="color: #006699;">**new**<span style="color: black;"> ArrayList&lt;SubEmployee&gt;();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
26.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(<span style="color: #006699;">**int**<span style="color: black;"> i=<span style="color: #c00000;">0<span style="color: black;">; i&lt;<span style="color: #c00000;">100<span style="color: black;">; i++){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></span></span></span></span></div>
27.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            SubEmployee emp = <span style="color: #006699;">**new**<span style="color: black;"> SubEmployee();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
28.  <div style="background: #f8f8f8;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            <span style="color: #008200;">//</span></span><span style="font-family: 宋体;">为分公司人员按顺序分配一个</span><span style="color: #008200; font-family: Consolas;">ID<span style="color: black;">  <span style="color: #5c5c5c;">
</span></span></span></span></div>
29.  <div style="background: white;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            emp.setId(<span style="color: blue;">"</span></span><span style="font-family: 宋体;">分公司</span><span style="color: blue; font-family: Consolas;">"<span style="color: black;">+i);  <span style="color: #5c5c5c;">
</span></span></span></span></div>
30.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            list.add(emp);  <span style="color: #5c5c5c;">
</span></span></div>
31.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
32.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**return**<span style="color: black;"> list;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
33.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
34.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">}  <span style="color: #5c5c5c;">
</span></span></div>
35.  <div style="background: white;">
</div>
36.  <div style="background: #f8f8f8;"><span style="color: #006699; font-family: Consolas; font-size: 9pt;">**class**<span style="color: black;"> CompanyManager{  <span style="color: #5c5c5c;">
</span></span></span></div>
37.  <div style="background: white;">
</div>
38.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> List&lt;Employee&gt; getAllEmployee(){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
39.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;Employee&gt; list = <span style="color: #006699;">**new**<span style="color: black;"> ArrayList&lt;Employee&gt;();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
40.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(<span style="color: #006699;">**int**<span style="color: black;"> i=<span style="color: #c00000;">0<span style="color: black;">; i&lt;<span style="color: #c00000;">30<span style="color: black;">; i++){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></span></span></span></span></div>
41.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            Employee emp = <span style="color: #006699;">**new**<span style="color: black;"> Employee();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
42.  <div style="background: #f8f8f8;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            <span style="color: #008200;">//</span></span><span style="font-family: 宋体;">为总公司人员按顺序分配一个</span><span style="color: #008200; font-family: Consolas;">ID<span style="color: black;">  <span style="color: #5c5c5c;">
</span></span></span></span></div>
43.  <div style="background: white;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            emp.setId(<span style="color: blue;">"</span></span><span style="font-family: 宋体;">总公司</span><span style="color: blue; font-family: Consolas;">"<span style="color: black;">+i);  <span style="color: #5c5c5c;">
</span></span></span></span></div>
44.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            list.add(emp);  <span style="color: #5c5c5c;">
</span></span></div>
45.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
46.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**return**<span style="color: black;"> list;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
47.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
48.  <div style="background: #f8f8f8;">
</div>
49.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> <span style="color: #006699;">**void**<span style="color: black;"> printAllEmployee(SubCompanyManager sub){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></div>
50.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;SubEmployee&gt; list1 = sub.getAllEmployee();  <span style="color: #5c5c5c;">
</span></span></div>
51.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(SubEmployee e:list1){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
52.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            System.out.println(e.getId());  <span style="color: #5c5c5c;">
</span></span></div>
53.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
54.  <div style="background: #f8f8f8;">
</div>
55.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;Employee&gt; list2 = <span style="color: #006699;">**this**<span style="color: black;">.getAllEmployee();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
56.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(Employee e:list2){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
57.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            System.out.println(e.getId());  <span style="color: #5c5c5c;">
</span></span></div>
58.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
59.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
60.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">}  <span style="color: #5c5c5c;">
</span></span></div>
61.  <div style="background: white;">
</div>
62.  <div style="background: #f8f8f8;"><span style="color: #006699; font-family: Consolas; font-size: 9pt;">**public**<span style="color: black;"> <span style="color: #006699;">**class**<span style="color: black;"> Client{  <span style="color: #5c5c5c;">
</span></span></span></span></span></div>
63.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> <span style="color: #006699;">**static**<span style="color: black;"> <span style="color: #006699;">**void**<span style="color: black;"> main(String[] args){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></span></span></div>
64.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        CompanyManager e = <span style="color: #006699;">**new**<span style="color: black;"> CompanyManager();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
65.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        e.printAllEmployee(<span style="color: #006699;">**new**<span style="color: black;"> SubCompanyManager());  <span style="color: #5c5c5c;">
</span></span></span></span></div>
66.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
67.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">}  <span style="color: #5c5c5c;">
</span></span></div>

<span style="color: black;"><span style="font-family: Arial; font-size: 10pt;">        </span><span style="font-family: 仿宋; font-size: 14pt;">现在这个设计的主要问题出在CompanyManager中，根据迪米特法则，只与直接的朋友发生通信，而SubEmployee类并不是CompanyManager类的直接朋友（以局部变量出现的耦合不属于直接朋友），从逻辑上讲总公司只与他的分公司耦合就行了，与分公司的员工并没有任何联系，这样设计显然是增加了不必要的耦合。按照迪米特法则，应该避免类中出现这样非直接朋友关系的耦合。修改后的代码如下:</span><span style="font-family: Arial; font-size: 10pt;">
</span></span>

<span style="color: silver; font-family: Verdana; font-size: 7pt;">**[java]** [<span style="color: #a0a0a0;">view plain</span>](http://blog.csdn.net/zhengzhb/article/details/7296930 "view plain") [<span style="color: #a0a0a0;">copy</span>](http://blog.csdn.net/zhengzhb/article/details/7296930 "copy")
</span>

1.  <div style="background: white;"><span style="color: #006699; font-family: Consolas; font-size: 9pt;">**class**<span style="color: black;"> SubCompanyManager{  <span style="color: #5c5c5c;">
</span></span></span></div>
2.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> List&lt;SubEmployee&gt; getAllEmployee(){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
3.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;SubEmployee&gt; list = <span style="color: #006699;">**new**<span style="color: black;"> ArrayList&lt;SubEmployee&gt;();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
4.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(<span style="color: #006699;">**int**<span style="color: black;"> i=<span style="color: #c00000;">0<span style="color: black;">; i&lt;<span style="color: #c00000;">100<span style="color: black;">; i++){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></span></span></span></span></div>
5.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            SubEmployee emp = <span style="color: #006699;">**new**<span style="color: black;"> SubEmployee();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
6.  <div style="background: #f8f8f8;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            <span style="color: #008200;">//</span></span><span style="font-family: 宋体;">为分公司人员按顺序分配一个</span><span style="color: #008200; font-family: Consolas;">ID<span style="color: black;">  <span style="color: #5c5c5c;">
</span></span></span></span></div>
7.  <div style="background: white;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            emp.setId(<span style="color: blue;">"</span></span><span style="font-family: 宋体;">分公司</span><span style="color: blue; font-family: Consolas;">"<span style="color: black;">+i);  <span style="color: #5c5c5c;">
</span></span></span></span></div>
8.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            list.add(emp);  <span style="color: #5c5c5c;">
</span></span></div>
9.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
10.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**return**<span style="color: black;"> list;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
11.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
12.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> <span style="color: #006699;">**void**<span style="color: black;"> printEmployee(){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></div>
13.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;SubEmployee&gt; list = <span style="color: #006699;">**this**<span style="color: black;">.getAllEmployee();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
14.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(SubEmployee e:list){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
15.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            System.out.println(e.getId());  <span style="color: #5c5c5c;">
</span></span></div>
16.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
17.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
18.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">}  <span style="color: #5c5c5c;">
</span></span></div>
19.  <div style="background: white;">
</div>
20.  <div style="background: #f8f8f8;"><span style="color: #006699; font-family: Consolas; font-size: 9pt;">**class**<span style="color: black;"> CompanyManager{  <span style="color: #5c5c5c;">
</span></span></span></div>
21.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> List&lt;Employee&gt; getAllEmployee(){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
22.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;Employee&gt; list = <span style="color: #006699;">**new**<span style="color: black;"> ArrayList&lt;Employee&gt;();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
23.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(<span style="color: #006699;">**int**<span style="color: black;"> i=<span style="color: #c00000;">0<span style="color: black;">; i&lt;<span style="color: #c00000;">30<span style="color: black;">; i++){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></span></span></span></span></div>
24.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            Employee emp = <span style="color: #006699;">**new**<span style="color: black;"> Employee();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
25.  <div style="background: white;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            <span style="color: #008200;">//</span></span><span style="font-family: 宋体;">为总公司人员按顺序分配一个</span><span style="color: #008200; font-family: Consolas;">ID<span style="color: black;">  <span style="color: #5c5c5c;">
</span></span></span></span></div>
26.  <div style="background: #f8f8f8;"><span style="color: black; font-size: 9pt;"><span style="font-family: Consolas;">            emp.setId(<span style="color: blue;">"</span></span><span style="font-family: 宋体;">总公司</span><span style="color: blue; font-family: Consolas;">"<span style="color: black;">+i);  <span style="color: #5c5c5c;">
</span></span></span></span></div>
27.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            list.add(emp);  <span style="color: #5c5c5c;">
</span></span></div>
28.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
29.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**return**<span style="color: black;"> list;  <span style="color: #5c5c5c;">
</span></span></span></span></div>
30.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
31.  <div style="background: white;">
</div>
32.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    <span style="color: #006699;">**public**<span style="color: black;"> <span style="color: #006699;">**void**<span style="color: black;"> printAllEmployee(SubCompanyManager sub){  <span style="color: #5c5c5c;">
</span></span></span></span></span></span></div>
33.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        sub.printEmployee();  <span style="color: #5c5c5c;">
</span></span></div>
34.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        List&lt;Employee&gt; list2 = <span style="color: #006699;">**this**<span style="color: black;">.getAllEmployee();  <span style="color: #5c5c5c;">
</span></span></span></span></div>
35.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        <span style="color: #006699;">**for**<span style="color: black;">(Employee e:list2){  <span style="color: #5c5c5c;">
</span></span></span></span></div>
36.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">            System.out.println(e.getId());  <span style="color: #5c5c5c;">
</span></span></div>
37.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">        }  <span style="color: #5c5c5c;">
</span></span></div>
38.  <div style="background: #f8f8f8;"><span style="color: black; font-family: Consolas; font-size: 9pt;">    }  <span style="color: #5c5c5c;">
</span></span></div>
39.  <div style="background: white;"><span style="color: black; font-family: Consolas; font-size: 9pt;">}  <span style="color: #5c5c5c;">
</span></span></div>

<span style="color: black; font-family: 仿宋; font-size: 14pt;">  修改后，为分公司增加了打印人员ID的方法，总公司直接调用来打印，从而避免了与分公司的员工发生耦合。
</span>

<span style="color: black; font-family: 仿宋; font-size: 14pt;">  迪米特法则的初衷是降低类之间的耦合，由于每个类都减少了不必要的依赖，因此的确可以降低耦合关系。但是凡事都有度，虽然可以避免与非直接的类通信，但是要通信，必然会通过一个"中介"来发生联系，例如本例中，总公司就是通过分公司这个"中介"来与分公司的员工发生联系的。过分的使用迪米特原则，会产生大量这样的中介和传递类，导致系统复杂度变大。所以在采用迪米特法则时要反复权衡，既做到结构清晰，又要高内聚低耦合。
</span>

<span style="color: black; font-family: 仿宋; font-size: 14pt;">原文作者：卡奴达摩
</span>

<span style="color: black; font-family: 仿宋; font-size: 14pt;">原文地址：http://blog.csdn.net/zhengzhb/article/details/7296930</span>