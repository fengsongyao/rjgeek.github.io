---
title: 【Yum】32位redhat6系统安装yum
tags:
  - Yum
id: 226
categories:
  - 应用服务器
date: 2014-09-10 01:33:21
---

<div>

## **32位redhat6系统安装yum**

由于&nbsp;[**redhat**](http://space.itpub.net/25313300/viewspace-708509)的yum在线更新是收费的，如果没有注册的话不能使用，如果要使用，需将redhat的yum卸载后，重启[**安装**](http://space.itpub.net/25313300/viewspace-708509)，再配置其他源，以下为详细过程：&nbsp;

### **一，安装国内在线yum源(网易163提供的)**
<!--more--><div><a>http://mirrors.163.com/centos/</a></div></div>

#### **1.删除redhat原有的yum**&nbsp;

rpm -aq|grep yum|xargs rpm -e --nodeps 

#### **2.下载yum安装文件 (需要有连接上web)**

wget http://mirrors.163.com/centos/6/os/i386/Packages/yum-3.2.29-40.el6.centos.noarch.rpm
wget http://mirrors.163.com/centos/6/os/i386/Packages/yum-metadata-parser-1.1.2-16.el6.i686.rpm
wget http://mirrors.163.com/centos/6/os/i386/Packages/yum-plugin-fastestmirror-1.1.30-14.el6.noarch.rpm
wget http://mirrors.163.com/centos/6/os/i386/Packages/<span data-wiz-span="data-wiz-span" style="font-size: 13px;">python-iniparse-0.3.1-2.1.el6.noarch.rpm</span>

#### **3.进行安装yum&nbsp;**

rpm -ivh python-iniparse-0.3.1-2.1.el6.noarch.rpm&nbsp;
rpm -ivh yum-metadata-parser-1.1.2-16.1.el6.i686.rpm&nbsp;
rpm -ivh yum-3.2.29-40.el6.centos.noarch.rpm yum-plugin-fastestmirror-1.1.30-14.el6.noarch.rpm&nbsp;&nbsp;
**注意最后两个包必需同时安装，否则会相互依赖 **

#### **4.编辑repo仓库服务器配置文件**

在配置文件中配置如下：/etc/yum.repos.d/rhel-source.repo
<div class="cnblogs_code"><div class="cnblogs_code_toolbar">
</div><div>[base]
name=CentOS-<span style="color: #800080;">$releasever</span>&nbsp;-&nbsp;Base
baseurl=http://mirrors.<span style="color: #800000;">163</span>.com/centos/<span style="color: #800000;">6</span>/os/<span style="color: #800080;">$basearch</span>/
gpgcheck=<span style="color: #800000;">1</span>
gpgkey=http://mirrors.<span style="color: #800000;">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span style="color: #800000;">6</span>

<span style="color: #008000;">#</span><span style="color: #008000;">released&nbsp;updates</span><span style="color: #008000;">
</span>[updates]
name=CentOS-<span style="color: #800080;">$releasever</span>&nbsp;-&nbsp;Updates
baseurl=http://mirrors.<span style="color: #800000;">163</span>.com/centos/<span style="color: #800000;">6</span>/updates/<span style="color: #800080;">$basearch</span>/
gpgcheck=<span style="color: #800000;">1</span>
gpgkey=http://mirrors.<span style="color: #800000;">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span style="color: #800000;">6</span>

<span style="color: #008000;">#</span><span style="color: #008000;">packages&nbsp;used/produced&nbsp;in&nbsp;the&nbsp;build&nbsp;but&nbsp;not&nbsp;released
#[addons]
#name=CentOS-$releasever&nbsp;-&nbsp;Addons
#baseurl=http://mirrors.163.com/centos/$releasever/addons/$basearch/
#gpgcheck=1
#gpgkey=http://mirrors.163.com/centos/RPM-GPG-KEY-CentOS-6
#additional&nbsp;packages&nbsp;that&nbsp;may&nbsp;be&nbsp;useful</span><span style="color: #008000;">
</span>
[extras]
name=CentOS-<span style="color: #800080;">$releasever</span>&nbsp;-&nbsp;Extras
baseurl=http://mirrors.<span style="color: #800000;">163</span>.com/centos/<span style="color: #800000;">6</span>/extras/<span style="color: #800080;">$basearch</span>/
gpgcheck=<span style="color: #800000;">1</span>
gpgkey=http://mirrors.<span style="color: #800000;">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span style="color: #800000;">6</span>
<span style="color: #008000;">#</span><span style="color: #008000;">additional&nbsp;packages&nbsp;that&nbsp;extend&nbsp;functionality&nbsp;of&nbsp;existing&nbsp;packages</span><span style="color: #008000;">
</span>[centosplus]
name=CentOS-<span style="color: #800080;">$releasever</span>&nbsp;-&nbsp;Plus
baseurl=http://mirrors.<span style="color: #800000;">163</span>.com/centos/<span style="color: #800000;">6</span>/centosplus/<span style="color: #800080;">$basearch</span>/
gpgcheck=<span style="color: #800000;">1</span>
gpgkey=http://mirrors.<span style="color: #800000;">163</span>.com/centos/RPM-GPG-KEY-CentOS-<span style="color: #800000;">6</span></div><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy">[![复制代码](https://rjgeek.github.io/images/2015/01/wpid-8038b5bf3528405ad9bb840c5ee69824_6aeeca23-32d1-4e01-bf79-daca79563a56.gif)]( "复制代码")</span></div></div>

#### **5.清除yum缓存**

yum clean all

#### **6.构建数据源基本资料**

yum repolist all

(如果这时运行正常，且enabld字段为1,那么表示yum源配置成功了)

#### **7.尝试安装**

yum install vim

### **二 配置命令解释**
<div><p>注:当第一次使用yum或yum资源库有更新时,yum会自动下载所有所需的headers放置于/var/cache/yum目录下,所需时间可能较长.

**系统更新(更新所有可以升级的rpm包,包括kernel)**
#yum -y update

**每天定期执行系统更新**
#chkconfig yum on
#service yum start

***rpm包的更新，检查可更新的rpm包**
#yum check-update

**更新所有的rpm包**
#yum update

**更新指定的rpm包,如更新kernel和kernel source**
#yum update kernel kernel-source

**大规模的版本升级,与yum update不同的是,连旧的淘汰的包也升级**
#yum upgrade

***rpm包的安装和删除**
安装rpm包,如xmms-mp3
#yum install xmms-mp3

**删除rpm包,包括与该包有倚赖性的包**
#yum remove licq
注:同时会提示删除licq-gnome,licq-qt,licq-text

***yum暂存(/var/cache/yum/)的相关参数**
清除暂存中rpm包文件
#yum clean packages

**清除暂存中rpm头文件**
#yum clean headers

**清除暂存中旧的rpm头文件**
#yum clean oldheaders

**清除暂存中旧的rpm头文件和包文件**
#yum clean 或#yum clean all
注:相当于yum clean packages + yum clean oldheaders

***rpm包列表**
列出资源库中所有可以安装或更新的rpm包
#yum list

**列出资源库中特定的可以安装或更新以及已经安装的rpm包**
#yum list mozilla
#yum list mozilla*
注:可以在rpm包名中使用匹配符,如列出所有以mozilla开头的rpm包

**列出资源库中所有可以更新的rpm包**
#yum list updates

**列出已经安装的所有的rpm包**
#yum list installed

**列出已经安装的但是不包含在资源库中的rpm包**
#yum list extras
注:通过其它网站下载安装的rpm包
*rpm包信息显示(info参数同list)

**列出资源库中所有可以安装或更新的rpm包的信息**
#yum info

**列出资源库中特定的可以安装或更新以及已经安装的rpm包的信息**
#yum info mozilla
#yum info mozilla*
注:可以在rpm包名中使用匹配符,如列出所有以mozilla开头的rpm包的信息

**列出资源库中所有可以更新的rpm包的信息**
#yum info updates

**列出已经安装的所有的rpm包的信息**
#yum info installed

**列出已经安装的但是不包含在资源库中的rpm包的信息**
#yum info extras
注:通过其它网站下载安装的rpm包的信息

***搜索rpm包**
搜索匹配特定字符的rpm包
#yum search mozilla
注:在rpm包名,包描述等中搜索

**搜索有包含特定文件名的rpm包**
#yum provides realplay

&nbsp;

### **三 常见问题解决**

**1、如果网速慢的话可以通过增加yum的超时时间，这样就不会总是因为超时而退出。**
#vi /etc/yum.conf
#加上这么一句
timeout=120

&nbsp;

**2、yum Existing lock错误的解决办法**
如果系统启动的时候， yum出现Existing lock /var/run/yum.pid: another copy is running as pid 3380\. Aborting.可以用下面的办法解决：
方法一
etc/init.d/yum-updatesd stop

方法二
#rm -f /var/run/yum.pid
主要原因就是yum在自动更新，只要关掉它就可以了。

&nbsp;

* * *

先安装fastestmirror，让系统yum的时候自动选择最快的镜像：

_#yum install yum-fastestmirror -y_

接下来说说RPMForge。

[RPMForge](http://rpmforge.net/)是一个安全、稳定并且更新及时的软件仓库，通过安装RPMForge可以是CentOS在进行yum update的时候多一个选择，有时候甚至是唯一的选择，比如想要升级rsync到3.0.x版本，如果懒得自己编译安装，就得依靠RPMForge了。

1、先安装priority这个yum的插件，这个插件用来设定安装软件时候软件仓库的优先级，一般是默认先从官方base或者镜像安装，然后从社区用户contribute的软件中安装，再从第三方软件仓库中安装。
_#yum install yum-priorities_

2、手动编辑 /etc/yum.repos.d/ 目录中后缀为.repos的文件来设置软件仓库的优先级
_priority=N_(N是整数，范围从1-99，数字越小代表优先级越高)

官方推荐配置是
[base], [addons], [updates], [extras]&nbsp;这几部分 priority=1
[centosplus],[contrib] 这几部分priority=2
Third Party Repos such as rpmforge … priority=N&nbsp; (where N is &gt; 10 and based on your preference)

3、现在开始安装rpmforge的软件仓库
先下载rpmforge的安装包
&nbsp; &nbsp; &nbsp; i386&nbsp;&nbsp;_wget&nbsp;_[_http://apt.sw.be/redhat/el5/en/i386/RPMS.dag/rpmforge-release-0.3.6-1.el5.rf.i386.rpm_](http://apt.sw.be/redhat/el5/en/i386/RPMS.dag/rpmforge-release-0.3.6-1.el5.rf.i386.rpm)

&nbsp; &nbsp; &nbsp; x86_64&nbsp;_wget&nbsp;_[_http://apt.sw.be/redhat/el5/en/x86_64/RPMS.dag/rpmforge-release-0.3.6-1.el5.rf.x86_64.rpm_](http://apt.sw.be/redhat/el5/en/x86_64/RPMS.dag/rpmforge-release-0.3.6-1.el5.rf.x86_64.rpm)

安装

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_rpm -i rpmforge-release-0.3.6-1.el5.rf.*.rpm_

更改 /etc/yum.repos.d/rpmforge.repo 配置文件，添加
_priority=1_（或者2.3.4….）

<div style="color:gray"><small>来源：&nbsp;&lt;[http://www.cnblogs.com/shuaixf/archive/2011/11/30/2268496.html](http://www.cnblogs.com/shuaixf/archive/2011/11/30/2268496.html)<small>&gt;</small></small></div></div></p><div style="color:gray"><small>来源：&nbsp;&lt;[http://www.cnblogs.com/mailingfeng/archive/2012/09/01/2666745.html](http://www.cnblogs.com/mailingfeng/archive/2012/09/01/2666745.html)<small>&gt;</small></small></div>

<span style="font-size: 10.5pt; line-height: 1.5;">&nbsp;</span>&nbsp;

<div>[来自为知笔记(Wiz)](http://www.wiz.cn/i/60efacb7 "来自为知笔记(Wiz)")</div>

<div>

### 附件列表

*   [redhat6_yum安装包.rar](https://rjgeek.github.io/images/2015/01/wpid-8038b5bf3528405ad9bb840c5ee69824_redhat6_yum安装包.rar)</div>

&nbsp;