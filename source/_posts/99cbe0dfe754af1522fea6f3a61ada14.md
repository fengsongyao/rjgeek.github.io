---
title: 【Oracle】查询锁表的用户并处理
tags:
  - Oracle
id: 34
categories:
  - 数据库知识
date: 2014-12-28 21:59:15
---

<div>--锁表查询</div>
<div>
<div>

1.  `<span class="pln">SQLSELECT object_name</span><span class="pun">,</span><span class="pln"> machine</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">sid</span><span class="pun">,</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">serial</span><span class="com"># </span>`
2.  `<span class="pln">FROM gv$locked_object l</span><span class="pun">,</span><span class="pln"> dba_objects o</span><span class="pun">,</span><span class="pln"> gv$session s </span>`
3.  `<span class="pln">WHERE l</span><span class="pun">.</span><span class="pln">object_id</span><span class="pun">　=</span><span class="pln"> o</span><span class="pun">.</span><span class="pln">object_id </span>`
4.  `<span class="pln">AND l</span><span class="pun">.</span><span class="pln">session_id </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">.</span><span class="pln">sid</span><span class="pun">;</span>`
</div>
</div>
<!--more-->
<div></div>
<div>找到被锁定的表，解锁</div>
<div></div>
<div>--释放SESSION SQL:</div>
<div>
<div>

1.  `<span class="pun">--</span><span class="pln">alter system kill session </span><span class="str">'sid, serial#'</span><span class="pun">;</span>`
2.  `<span class="pln">ALTER system kill session </span><span class="str">'23, 1647'</span><span class="pun">;</span>`
</div>
<div></div>
</div>
